!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.littlemodal=e():t.littlemodal=e()}(self,(function(){return function(){"use strict";var t={d:function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t){var e=document.createElement("div");return e.className="little-scale",e.insertAdjacentHTML("afterbegin",'\n\t\t\t<div class="little-slider-line"></div>\n\t\t\t<div class="little-pointer"></div>\n\t'),e}t.d(e,{default:function(){return a}});var s=function(){function t(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t),this.y1=0,this.y2=0,this.targetElement=e,this.target=n,this.options=s,this.max=s.max||100,this.min=s.min||0,this.value="number"==typeof s.value?s.value:this.min,this.step=s.step||1,this.currentValue=0,this.isShow=!1,this.$element=o(),this.$sliderLine=this.$element.querySelector(".little-slider-line"),this.$pointer=this.$element.querySelector(".little-pointer"),this.init()}var e,s;return e=t,s=[{key:"init",value:function(){var t=this;this.targetElement.querySelector(this.target).appendChild(this.$element),this.options.onInit&&this.options.onInit.call(),["mouseDownHandler","mouseUpHandler","mouseMoveHandler"].forEach((function(e){return t[e]=t[e].bind(t)})),this.$element.addEventListener("mousedown",this.mouseDownHandler),this.setPosition(this.getPositionFromValue(this.value)),this.calculate()}},{key:"calculate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e>t&&!this.isShow?(this.isShow=!0,this.$element.style.display="block",this.options.onShow&&this.options.onShow.call(),console.log("slider show")):t>e&&this.isShow&&(this.isShow=!1,this.$element.style.display="none",this.options.onHide&&this.options.onHide.call(),console.log("slider hide"));var i=Math.round(t/e*100);this.$pointer.style.height=(i<30?30:i)+"%",this.pointerHeight=this.$pointer.offsetHeight,this.pointToMiddle=this.pointerHeight/2,this.scaleHeight=this.$element.offsetHeight-this.pointerHeight,this.setPosition(this.currentPos)}},{key:"mouseDownHandler",value:function(t){t.preventDefault(),this.options.onMouseDown&&this.options.onMouseDown.call(this.options,t),this.y2=this.eventPos(t,this.$element),this.setPosition(this.y2-this.pointToMiddle),document.addEventListener("mouseup",this.mouseUpHandler),document.addEventListener("mousemove",this.mouseMoveHandler)}},{key:"mouseUpHandler",value:function(t){this.options.onMouseUp&&this.options.onMouseUp.call(this.options,t),document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler)}},{key:"mouseMoveHandler",value:function(t){t.preventDefault(),this.options.onSlide&&this.options.onSlide.call(this.options,t);var e=this.eventPos(t,this.$element);this.setPosition(e-this.pointToMiddle)}},{key:"setPosition",value:function(t){this.currentPos=t,t=t<0?0:t>=this.scaleHeight?this.scaleHeight:t;var e=this.getValueFromPosition(t);e=e>this.max?this.max:e<this.min?this.min:e;var i=this.getPositionFromValue(e);(e>this.currentValue||e<this.currentValue)&&(this.currentValue=e,this.options.onChange&&this.options.onChange.call(this.options,this.currentValue),e===this.max&&this.options.onSlideEnd&&this.options.onSlideEnd.call(this.options,this.currentValue)),this.$sliderLine.style.height=i+"px",this.$pointer.style.top=i+"px"}},{key:"getPositionFromValue",value:function(t){return(t-this.min)/(this.max-this.min)*this.scaleHeight}},{key:"getValueFromPosition",value:function(t){var e=t/this.scaleHeight,i=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min;return Number(i.toFixed(this.fixTofractional(this.step)))}},{key:"fixTofractional",value:function(t){return t.toString().replace(".","").length-1}},{key:"eventPos",value:function(t,e){return t.pageY-e.getBoundingClientRect().top}}],s&&n(e.prototype,s),t}();function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function t(){var e,i,n,o,s,h,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,t),this.options=a,this.options.inner=null!==(e=a.inner)&&void 0!==e?e:"",this.options.title=null!==(i=a.title)&&void 0!==i?i:"Little modal",this.options.OK=null!==(n=a.OK)&&void 0!==n&&n,this.options.CANSEL=null!==(o=a.CANSEL)&&void 0!==o&&o,this.options.wWidth=null!==(s=a.wWidth)&&void 0!==s?s:300,this.options.wHeight=null!==(h=a.wHeight)&&void 0!==h?h:150,this.$element=null,this.target=null!==(r=a.target)&&void 0!==r?r:"body",this.scope=document.querySelector(a.scope)||!1,this.tochX=0,this.tochY=0,this.valueX=0,this.valueY=0,this.borderXMin=0,this.borderXMax=0,this.borderYMin=0,this.borderYMax=0,this.innerMinWidth=250,this.innerMinHeight=150,this.$body=document.querySelector("body"),this.scope&&(this.scope.style.position="relative")}var e,i;return e=t,(i=[{key:"init",value:function(){var t,e=this;if(null===this.$element){var i,n,o=null!==(t=this.$element)&&void 0!==t?t:(i=this.options,(n=document.createElement("div")).className="little-modal",n.insertAdjacentHTML("afterbegin",'\n\t\t\t<div class="little-slider"></div>\n\t\t\t<div class="dLeft" data-type="left"></div>\n\t\t\t<div class="dBottom" data-type="bottom"></div>\n\t\t\t<div class="dRight" data-type="right"></div>\n\t\t\t<div class="dCornerLeft" data-type="cornerLeft"></div>\n\t\t\t<div class="dCornerRight" data-type="cornerRight"></div>\n\t\t\t<div class="little-modal-title" data-type="title">'.concat(i.title,' <button>&#120;</button></div>\n\t\t\t<div class="little-modal-body">\n\t\t\t\t<div class="wrap">\n\t\t\t\t\t<div class="inner-place">\n\t\t\t\t\t\t').concat(i.inner,'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="little-modal-button-place" ').concat(i.OK||i.CANSEL?"style='display: block;'":"",">\n\t\t\t\t").concat(i.OK?'<button data-type="OK">'.concat(i.OK,"</button>"):"","\n\t\t\t\t").concat(i.CANSEL?'<button data-type="CANSEL">'.concat(i.CANSEL,"</button>"):"","\n\t\t\t</div>\n\t\t")),n),l=this.options.wWidth,h=this.options.wHeight;this.$element=o,this.$elTitle=o.querySelector(".little-modal-title"),this.$elClose=this.$elTitle.querySelector("button"),this.$elBody=o.querySelector(".little-modal-body"),this.$elDragLeft=o.querySelector(".dLeft"),this.$elDragBottom=o.querySelector(".dBottom"),this.$elDragRight=o.querySelector(".dRight"),this.$elDragCornerLeft=o.querySelector(".dCornerLeft"),this.$elDragCornerRight=o.querySelector(".dCornerRight"),this.$elInner=o.querySelector(".little-modal .inner-place"),this.$elBtnPlace=o.querySelector(".little-modal-button-place"),this.$element.style.width="auto"===l?"auto":l+"px",this.$element.style.height="auto"===h?"auto":h+"px",document.querySelector(this.target)?document.querySelector(this.target).appendChild(this.$element):document.body.insertAdjacentElement("afterbegin",this.$element),["sliderOnChange","sliderScrolling","mouseMoveDragCornerLeftHandler","mouseMoveDragCornerRightHandler","mouseMoveDragLeftHandler","mouseMoveDragBottomHandler","mouseMoveDragRightHandler","mouseDownHandler","mouseUpHandler","onButton","mouseMoveHandler","onResize","onClose"].forEach((function(t){return e[t]=e[t].bind(e)})),window.addEventListener("resize",this.onResize),this.$elClose.addEventListener("click",this.onClose),this.$elBtnPlace.addEventListener("click",this.onButton),this.$elTitle.addEventListener("mousedown",this.mouseDownHandler),this.$elDragLeft.addEventListener("mousedown",this.mouseDownHandler),this.$elDragBottom.addEventListener("mousedown",this.mouseDownHandler),this.$elDragRight.addEventListener("mousedown",this.mouseDownHandler),this.$elDragCornerLeft.addEventListener("mousedown",this.mouseDownHandler),this.$elDragCornerRight.addEventListener("mousedown",this.mouseDownHandler),this.slider=new s(this.$element,".little-slider",{min:0,max:100,onChange:function(t){return e.sliderOnChange(t)},onShow:function(){return e.sliderOnShow()},onHide:function(){return e.sliderOnHide()}}),this.calculate()}}},{key:"sliderOnChange",value:function(t){var e=this.$elBody.offsetHeight,i=this.$elInner.offsetHeight-e;this.$elBody.scrollTop=Math.round(i/this.slider.max*t),this.options.onSliderChange&&this.options.onSliderChange.call(this.options,t)}},{key:"sliderOnShow",value:function(){var t=this.$elInner.className.split(" ");this.$elInner.className=t.filter((function(t){return"sliderShow"!==t})).join(" ")+" sliderShow",this.$elBody.addEventListener("wheel",this.sliderScrolling),this.options.onSliderShow&&this.options.onSliderShow.call(this.options)}},{key:"sliderOnHide",value:function(){var t=this.$elInner.className.split(" ");this.$elInner.className=t.filter((function(t){return"sliderShow"!==t})).join(" "),this.$elBody.removeEventListener("wheel",this.sliderScrolling),this.options.onSliderHide&&this.options.onSliderHide.call(this.options)}},{key:"sliderScrolling",value:function(t){var e=this.slider.getPositionFromValue(this.slider.currentValue);this.slider.setPosition(e- -.1*t.deltaY),this.options.onSliderScroll&&this.options.onSliderScroll.call(this.options,e)}},{key:"calculate",value:function(){if(this.tochX=0,this.tochY=0,this.elementWidth=this.$element.offsetWidth,this.elementHeight=this.$element.offsetHeight,this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.borderXMax=this.windowWidth,this.borderYMax=this.windowHeight,this.scope){var t=this.scope.getBoundingClientRect();this.borderXMin=t.left,this.borderXMax=t.right,this.borderYMin=t.top,this.borderYMax=t.bottom,this.windowWidth=t.width,this.windowHeight=t.height}this.limitWidth=this.windowWidth-this.elementWidth,this.limitHeight=this.windowHeight-this.elementHeight,this.setPosition(this.valueX,this.valueY),this.slider.calculate(this.$elBody.offsetHeight,this.$elInner.offsetHeight),console.log("calculating")}},{key:"open",value:function(t){for(var e in console.log(t),t)"undefined"!==this.options[e]&&(this.options[e]=t[e]);this.init()}},{key:"close",value:function(){null!==this.$element&&this.destroy()}},{key:"setPosition",value:function(t,e){var i=this.tochX,n=this.windowWidth-this.elementWidth+this.tochX,o=this.tochY,s=this.windowHeight-this.elementHeight+this.tochY;this.valueX=t-this.tochX,this.valueY=e-this.tochY,this.valueX=this.valueX>0?this.valueX:0,this.valueX=this.valueX>this.limitWidth?this.limitWidth:this.valueX,this.valueY=this.valueY>0?this.valueY:0,this.valueY=this.valueY>this.limitHeight?this.limitHeight:this.valueY,this.valueX=t>i?this.valueX:0,this.valueX=t>n?this.limitWidth:this.valueX,this.valueY=e>o?this.valueY:0,this.valueY=e>s?this.limitHeight:this.valueY,this.$element.style.left=this.valueX+"px",this.$element.style.top=this.valueY+"px"}},{key:"moveDragLeft",value:function(t,e){if(this.limits(t,e)){var i=this.dragX-t;this.dragX=t,this.elementWidth=t>this.maximumPosXForLeft?this.innerMinWidth:this.elementWidth+i,this.valueX=t>this.maximumPosXForLeft?this.dragMaximumLeftPositionX:this.valueX-i,this.valueX>-1&&(this.$element.style.width=this.elementWidth+"px",this.$element.style.left=this.valueX+"px")}}},{key:"moveDragBottom",value:function(t,e){if(this.limits(t,e)){var i=this.dragY-e;this.dragY=e,this.elementHeight=e>this.maximumPosYForBottom?this.elementHeight-i:this.innerMinHeight,this.elementHeight+this.valueY<=this.windowHeight&&(this.$element.style.height=this.elementHeight+"px")}}},{key:"moveDragRight",value:function(t,e){if(this.limits(t,e)){var i=this.dragX-t;this.dragX=t,this.elementWidth=t>this.maximumPosXForRight?this.elementWidth-i:this.innerMinWidth,this.elementWidth+this.valueX<=this.windowWidth&&(this.$element.style.width=this.elementWidth+"px")}}},{key:"onClose",value:function(t){this.close()}},{key:"onButton",value:function(t){switch(t.target.getAttribute("data-type")){case"OK":this.options.onOk&&this.options.onOk.call(this.options,t);break;case"CANSEL":this.options.onCansel&&this.options.onCansel.call(this.options,t)}}},{key:"onResize",value:function(t){this.calculate()}},{key:"mouseDownHandler",value:function(t){var e=this.elementWidth-this.innerMinWidth,i=this.elementHeight-this.innerMinHeight;switch(this.dragX=t.clientX,this.dragY=t.clientY,this.maximumPosXForLeft=t.clientX+e,this.maximumPosXForRight=t.clientX-e,this.maximumPosYForBottom=t.clientY-i,this.dragMaximumLeftPositionX=this.$element.getBoundingClientRect().left-this.borderXMin+e,t.target.getAttribute("data-type")){case"left":document.addEventListener("mousemove",this.mouseMoveDragLeftHandler);break;case"bottom":document.addEventListener("mousemove",this.mouseMoveDragBottomHandler);break;case"right":document.addEventListener("mousemove",this.mouseMoveDragRightHandler);break;case"cornerLeft":document.addEventListener("mousemove",this.mouseMoveDragCornerLeftHandler);break;case"cornerRight":document.addEventListener("mousemove",this.mouseMoveDragCornerRightHandler);break;case"title":if(this.tochX=t.clientX-this.$element.getBoundingClientRect().left,this.tochY=t.clientY-this.$element.getBoundingClientRect().top,this.scope){var n=this.scope.getBoundingClientRect();this.tochX+=n.left,this.tochY+=n.top}document.addEventListener("mousemove",this.mouseMoveHandler)}document.addEventListener("mouseup",this.mouseUpHandler)}},{key:"mouseMoveDragCornerLeftHandler",value:function(t){this.moveDragLeft(t.clientX,t.clientY),this.moveDragBottom(t.clientX,t.clientY),this.slider.calculate(this.$elBody.offsetHeight,this.$elInner.offsetHeight)}},{key:"mouseMoveDragCornerRightHandler",value:function(t){this.moveDragRight(t.clientX,t.clientY),this.moveDragBottom(t.clientX,t.clientY),this.slider.calculate(this.$elBody.offsetHeight,this.$elInner.offsetHeight)}},{key:"mouseMoveDragLeftHandler",value:function(t){this.moveDragLeft(t.clientX,t.clientY),this.slider.calculate(this.$elBody.offsetHeight,this.$elInner.offsetHeight)}},{key:"mouseMoveDragBottomHandler",value:function(t){this.moveDragBottom(t.clientX,t.clientY),this.slider.calculate(this.$elBody.offsetHeight,this.$elInner.offsetHeight)}},{key:"mouseMoveDragRightHandler",value:function(t){this.moveDragRight(t.clientX,t.clientY),this.slider.calculate(this.$elBody.offsetHeight,this.$elInner.offsetHeight)}},{key:"mouseUpHandler",value:function(t){console.log("remove listeners"),document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mousemove",this.downDragMouse),document.removeEventListener("mousemove",this.mouseMoveDragLeftHandler),document.removeEventListener("mousemove",this.mouseMoveDragBottomHandler),document.removeEventListener("mousemove",this.mouseMoveDragRightHandler),document.removeEventListener("mousemove",this.mouseMoveDragCornerLeftHandler),document.removeEventListener("mousemove",this.mouseMoveDragCornerRightHandler),document.removeEventListener("mouseup",this.mouseUpHandler),document.removeEventListener("mousedown",this.mouseDownHandler),this.slider.calculate(this.$elBody.offsetHeight,this.$elInner.offsetHeight),this.calculate()}},{key:"mouseMoveHandler",value:function(t){this.limits(t.clientX,t.clientY)&&this.setPosition(t.clientX,t.clientY)}},{key:"limits",value:function(t,e){return t>this.borderXMin&&t<this.borderXMax&&e>this.borderYMin&&e<this.borderYMax}},{key:"destroy",value:function(){this.$elClose.removeEventListener("onclick",this.onClose),window.removeEventListener("resize",this.onResize),this.$elTitle.removeEventListener("mousedown",this.mouseDownHandler),this.$elBtnPlace.removeEventListener("click",this.onButton),this.$element.parentNode.removeChild(this.$element),this.$element=null}}])&&h(e.prototype,i),t}(),a={init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=null;return{open:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=null===e?new r(t):e).open(i)},close:function(){null!==e?e.close():console.log("is it already closed")}}}};return e.default}()}));